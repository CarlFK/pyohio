<!DOCTYPE html>
<html>

<head>

<title>PyOhio 2015 Proposals</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript"
    src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">

<script type="text/javascript"
    src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>

<script type="text/javascript"
    src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>

</head>

<body>

<div id="main">
<div class="container">

<h1>PyOhio 2015 Proposals</h1>

<div class="well">
<span data-bind="text: syslog" class="small text-muted pull-right"></span>

<button class="btn btn-default btn-xs"
    data-bind="click: grab_all_proposals,
        attr: {disabled: is_busy}">Grab / reload all proposals</button>

<button class="btn btn-default btn-xs"
    data-bind="click: grab_top_proposals,
        attr: {disabled: is_busy}">Grab / reload top proposals</button>

<a href="/all_proposals.csv"
    class="btn btn-default btn-xs"
    target="_blank">CSV with all proposals</a>

<a href="/top_proposals.csv"
    class="btn btn-default btn-xs"
    target="_blank">CSV with top proposals</a>

</div>

<hr />

<div data-bind="foreach: proposals">

<div class="well">

<span class="lead" data-bind="text: title"></span>

<a class="pull-right"
    target="_blank"
    data-bind="attr: {
        href: 'http://www.pyohio.org/reviews/review/' + id + '/'},
        text: id">
</a>
<br />

<span data-bind="text: speaker"></span>,
<span data-bind="text: proposal_length"></span> hours,
<span data-bind="text: audience_level"></span>
<br />

<span data-bind="text: approval_rating"></span>% approval,
<span data-bind="text: total_votes"></span> total votes

<p>
<span data-bind="text: room"></span>
at
<span data-bind="text: start_time"></span>
until
<span data-bind="text: end_time"></span>
.
</p>

</div>

</div><!-- closes foreach -->


</div><!-- closes div class="container" -->
</div><!-- closes div class="main" -->

<script type="text/javascript" src="/pyohio.js"></script>

<script type="text/javascript">

var pyvm;

$(document).ready(function () {
    pyvm = new PyOhioVM({});
    ko.applyBindings(pyvm);
    pyvm.grab_all_proposals();
});

</script>

</body>

</html>
